---
title: "間違って削除してしまった開発中のファイルを復活させる3つの方法"
emoji: "📚"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: ["PHPStorm", "IntelliJ", "Visual Studio Code", "VSCode", "Git"]
published: false
---

# はじめに

新規追加したファイルなど、バージョン管理されていないファイルを誤って削除してしまった場合、
なんとか復活させる方法を考えなければいけません。
が、その日の作業が消えてしまったショックから、冷静に考えられないことも多いかと思います。

まさかのときのために、打てる手立てをまとめます。

# 元に戻す(Undo)機能を試す

削除した直後では、`元に戻す`機能を使って、削除してしまったファイルを戻せる可能性があります。

元に戻す機能は多くのエディタで、以下のショートカットで使用できます。

Windows
```
Ctrl + z
```

Mac
```
Command + z
```

# ゴミ箱を探す

OSやエディタによっては、削除してしまったファイルを`ゴミ箱に入れているだけ`の場合があります。
ゴミ箱を探してみましょう。

# エディタのファイル履歴機能を試す

エディタによっては、ある期間ごとに`ファイルのバックアップを自動保存`してくれているものがあります。
今回は私が普段使用している、PHPStormとVSCodeについて記載します。
(JetBrains社のエディタであれば同じ機能が搭載されていると思います。)

## PHPStormの場合

公式ブログ(https://blog.jetbrains.com/ja/2020/03/31/2927/)に手順が画像付きで詳しく書いてあります。
ここでは掻い摘んで説明します。

PHPStormには、Local History(ローカル履歴)と呼ばれる機能が用意さてれおり、設定を変更していなければ、常に5日分の履歴が保存されています。

**Local History機能の使い方**

1. 消してしまったファイルを置いていたフォルダを選択する。
  (わからなければ表示されている一番上のフォルダを選択)
1. `Ctrl + Shift + A`を押し、Action検索ウィンドウを表示する。
  (Macの場合は、`Command + Shift + A`)
1. `local history`と入力し、`Local History`を選択する。
1. `Show History`を選択する。
1. バックアップの一覧が表示されるので、戻したいものを選択し、`Revert`をクリックする。

これで、選択したバックアップの状態に戻るはずです。

## VSCodeの場合

私が調べた限り、VSCodeのデフォルト機能では、期待する機能はなさそうです。
VSCodeでは、拡張機能としてバックアップ機能が用意されていますが、**インストールしておかないとバックアップを取ってくれません**。
なので、悲劇が起きる前に、以下の拡張機能をインストールしておきましょう。

Local History
https://marketplace.visualstudio.com/items?itemName=xyz.local-history

この拡張機能をインストールすると、作業しているフォルダに`.history`フォルダが作られ、ファイルのバックアップが保存されていきます。
誤ってファイルを削除してしまった場合は、`.history`フォルダのバックアップを使って、ファイルを復活できます。

# まとめ

